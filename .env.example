# ExpiryTrack Configuration File
# Copy this file to .env and fill in your values (Optional)
# With zero-config design, all settings have sensible defaults

# ============================================================================
# UPSTOX API CREDENTIALS (Optional - Recommended to use Web Interface)
# ============================================================================
# Credentials are stored encrypted in database via web interface at /settings
# These env vars are optional fallbacks if you prefer env-based config
# Get these from: https://api.upstox.com/developer/apps

# UPSTOX_CLIENT_ID=your_client_id_here
# UPSTOX_CLIENT_SECRET=your_client_secret_here
# UPSTOX_REDIRECT_URI=http://127.0.0.1:5000/callback
# UPSTOX_API_KEY=your_api_key_here

# ============================================================================
# WEB APPLICATION SETTINGS
# ============================================================================

# Flask Configuration
FLASK_APP=app.py
FLASK_ENV=development
FLASK_DEBUG=True

# Secret key for sessions (generate a strong key for production)
SECRET_KEY=dev-secret-key-change-in-production

# Server Configuration
HOST=127.0.0.1
PORT=5000

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# Database path (SQLite)
DATABASE_PATH=./data/expirytrack.db

# Database connection settings
DB_POOL_SIZE=10
DB_POOL_TIMEOUT=30

# ============================================================================
# DATA COLLECTION SETTINGS
# ============================================================================

# Default instruments (pre-configured in database)
DEFAULT_INSTRUMENTS=NSE_INDEX|Nifty 50,NSE_INDEX|Nifty Bank,BSE_INDEX|SENSEX

# Historical data range (days before expiry)
HISTORICAL_DAYS=90  # 3 months

# Default data interval
DEFAULT_INTERVAL=1minute

# Concurrent workers for collection
MAX_WORKERS=5

# ============================================================================
# RATE LIMITING (Upstox API Limits)
# ============================================================================

# Conservative limits below Upstox maximums for safety
MAX_REQUESTS_PER_SECOND=45  # Upstox limit: 50
MAX_REQUESTS_PER_MINUTE=450  # Upstox limit: 500
MAX_REQUESTS_PER_30MIN=1800  # Upstox limit: 2000

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file settings
LOG_FILE=./logs/expirytrack.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Console logging
LOG_TO_CONSOLE=True

# ============================================================================
# TASK MANAGER SETTINGS
# ============================================================================

# Task queue size
TASK_QUEUE_SIZE=100

# Task timeout (seconds)
TASK_TIMEOUT=3600  # 1 hour

# Progress update interval (seconds)
PROGRESS_UPDATE_INTERVAL=2

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# Session configuration
SESSION_TYPE=filesystem
SESSION_FILE_DIR=./flask_session
SESSION_COOKIE_SECURE=False  # Set True in production with HTTPS
SESSION_COOKIE_HTTPONLY=True
PERMANENT_SESSION_LIFETIME=3600  # 1 hour

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Batch size for database inserts
BATCH_SIZE=5000

# Request timeout (seconds)
REQUEST_TIMEOUT=30

# Retry configuration
MAX_RETRIES=3
RETRY_DELAY=1

# HTTP/2 support
HTTP2_ENABLED=True

# Connection pool
CONNECTION_POOL_SIZE=100

# ============================================================================
# WEB INTERFACE SETTINGS
# ============================================================================

# Auto-refresh intervals (seconds)
STATUS_REFRESH_INTERVAL=5
PROGRESS_REFRESH_INTERVAL=1

# Items per page in listings
ITEMS_PER_PAGE=50

# ============================================================================
# DEVELOPMENT/DEBUG SETTINGS
# ============================================================================

# Enable debug mode
DEBUG_MODE=False

# Mock mode (testing without API calls)
MOCK_MODE=False

# ============================================================================
# NOTES
# ============================================================================
# 1. This file is completely optional - all settings have defaults
# 2. Copy to .env and update with your values
# 3. API credentials are best configured via web interface (/settings)
# 4. Never commit the actual .env file to version control
# 5. For production deployment:
#    - Set FLASK_ENV=production
#    - Set FLASK_DEBUG=False
#    - Generate a strong SECRET_KEY
#    - Enable SESSION_COOKIE_SECURE with HTTPS
# ============================================================================

# Quick Start Commands:
# 1. Install dependencies: pip install -r requirements.txt
# 2. Run application: python app.py
# 3. Open browser: http://localhost:5000
# 4. Configure credentials: Go to Settings page
# 5. Start collection: Use the Collection Wizard